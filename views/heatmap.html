<!DOCTYPE html>
<html style="height: 100%">
<meta charset="utf-8">
<title>Heagggggtmap</title>

<head>

    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- Libraries CSS Files -->
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<br><br><br><br><br><br><br><br>
<header id="header" style="background-color: #2C3A47">
    <div class="container-fluid">
        <div id="logo" class="pull-left">
            <h1><a href="/" class="scrollto">Analytics Pro</a></h1>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="#intro"><img src="img/logo.png" alt="" title="" /></a>-->
        </div>
</header>

<body style="height: 100%; margin: 0">
    <div id="container" style="height: 100%"></div>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
    <script src="../vendors/jquery/dist/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function (e) {

            var country_name = localStorage.getItem('selected_country');

    $.ajax({
            url: "http://localhost:5000/heat_map_data?name=" + country_name,
            type: "GET",
            success: function (res) {
                console.log(res);
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;
        app.title = '笛卡尔坐标系上的热力图';
        var days = res.years_arr;
        var data = res.heat_array;
        var hours = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul',
            'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        // var days = ['Saturday', 'Friday', 'Thursday',
        //     'Wednesday', 'Tuesday', 'Monday', 'Sunday'];

        // var data = [[0,0,17],[0,1,20],[0,2,25],[0,3,29],[0,4,30],[0,5,29],[0,6,28],[0,7,28],[0,8,28],[0,9,26],[0,10,22],[0,11,18],[1,0,19],[1,1,22],[1,2,27],[1,3,30],[1,4,32],[1,5,30],[1,6,28],[1,7,26],[1,8,27],[1,9,26],[1,10,24],[1,11,19],[2,0,20],[2,1,23],[2,2,28],[2,3,32],[2,4,32],[2,5,30],[2,6,27],[2,7,26],[2,8,27],[2,9,28],[2,10,24],[2,11,21],[3,0,20],[3,1,22],[3,2,26],[3,3,30],[3,4,32],[3,5,31],[3,6,28],[3,7,27],[3,8,27],[3,9,26],[3,10,22],[3,11,19],[4,0,20],[4,1,22],[4,2,27],[4,3,31],[4,4,32],[4,5,30],[4,6,27],[4,7,26],[4,8,27],[4,9,27],[4,10,24],[4,11,21],[5,0,18],[5,1,22],[5,2,28],[5,3,30],[5,4,31],[5,5,29],[5,6,28],[5,7,28],[5,8,28],[5,9,28],[5,10,24],[5,11,22],[6,0,20],[6,1,23],[6,2,27],[6,3,30],[6,4,32],[6,5,29],[6,6,27],[6,7,27],[6,8,27],[6,9,27],[6,10,24],[6,11,22]];

        data = data.map(function (item) {
            return [item[1], item[0], item[2] || '-'];
        });

        option = {
            tooltip: {
                position: 'top'
            },
            animation: false,
            grid: {
                height: '50%',
                y: '10%'
            },
            xAxis: {
                type: 'category',
                data: hours,
                splitArea: {
                    show: true
                }
            },
            yAxis: {
                type: 'category',
                data: days,
                splitArea: {
                    show: true
                }
            },
            visualMap: {
                min: 10,
                max: 46,
                calculable: true,
                orient: 'horizontal',
                left: 'center',
                bottom: '15%'
            },
            series: [{
                name: 'Temperature',
                type: 'heatmap',
                data: data,
                label: {
                    normal: {
                        show: true
                    }
                },
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }]
        };;
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    }
});
});
    </script>
</body>

</html>